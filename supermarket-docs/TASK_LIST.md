TASK_LIST.md
# 🛒 超市管理系统 - 任务清单

> 状态标记说明：
> - [ ] 待开始
> - [x] 已完成
> - [~] 进行中

## 一、基础架构与环境搭建 
- [x] **1.1 项目文档初始化 (README, TASK_LIST, API_DOC)**
- [x] 1.2 后端依赖构建 (pom.xml) 与 SpringBoot 工程初始化
- [x] 1.3 数据库设计：ER图与基础表结构 (用户/角色/权限)
- [x] 1.4 前后端分离跨域配置 (CORS)
- [x] 1.5 统一返回结果封装 (Result)与全局异常处理

### 基础架构与环境搭建已执行的详细任务:
- [x] 1.1 Spring Boot 项目脚手架搭建
- [x] 1.2 MySQL 数据库连接与 MyBatis-Plus 配置
- [x] 1.3 统一响应封装 (`Result<T>`) 与全局异常处理
- [x] 1.4 CORS 跨域配置
- [x] 1.5 集成 Swagger/Knife4j 接口文档 (可选，目前通过 Markdown 文档维护)

## 二、用户与权限模块 (Security + JWT)
- [x] 2.1 数据库建表：用户表、角色表、权限表
- [x] 2.2 JWT 工具类封装 (生成/解析 Token)
- [x] 2.3 Spring Security 认证过滤器链配置
- [x] 2.4 登录接口实现 (返回 Token)
- [x] 2.5 用户增删改查 API
- [x] 2.6 获取当前登录用户信息 API

### 用户与权限模块已执行的详细任务:
- [x] 2.1 数据库设计 (`sys_user`, `sys_role`)
- [x] 2.2 JWT 工具类与 Spring Security 过滤器链
- [x] 2.3 登录接口 (`/auth/login`) 与获取用户信息 (`/auth/info`)
- [x] 2.4 用户管理 CRUD (增删改查、密码重置、逻辑删除)

## 三、商品管理模块
- [x] 3.1 数据库建表：商品表
- [x] 3.2 商品基础增删改查 (CRUD)
- [x] 3.3 商品分页查询 (支持多条件筛选)
- [x] 3.4 商品唯一性校验 (名称+规格)

### 商品管理模块已执行的详细任务:
- [x] 3.1 数据库设计 (`product`, `product_category`)
- [x] 3.2 实体类与 Mapper 搭建
- [x] 3.3 商品分类管理 API (树形结构查询、增删改)
- [x] 3.4 商品信息管理 API (分页查询、条码唯一性校验、上下架状态管理)

## 四、进货管理模块
- [x] 4.1 数据库建表：进货单、进货明细、供应商
- [x] 4.2 创建进货单 API
- [x] 4.3 进货单审核与入库逻辑
- [x] 4.4 进货统计查询

### 进货管理模块已执行的详细任务:
- [x] 4.1 供应链数据库设计 (`supplier`, `purchase_bill`, `purchase_bill_item`)
- [x] 4.2 供应商管理 API (CRUD、下拉列表查询)
- [x] 4.3 进货单实体类与 Mapper 搭建
- [x] 4.4 (已合并至 4.2)
- [x] 4.5 进货核心业务逻辑
    - [x] 开单 (保存草稿)
    - [x] 审核入库 (事务控制：更新状态 + **自动增加商品库存** + 更新进价)

## 五、库存管理模块 (核心)
- [x] 5.1 数据库建表：库存表
- [x] 5.2 库存变动逻辑 (入库加，销售减)
- [x] 5.3 **库存预警逻辑 (数量下限预警)**
- [x] 5.4 **临期商品检测 (简化版 - 通过商品表字段实现)**
- [x] 5.5 库存盘点功能

### 库存管理模块已执行的详细任务:
- [x] 5.1 销售数据库设计 (`sale_order`, `sale_detail`)
- [x] 5.2 销售实体类与 Mapper 搭建 (修正了类名不一致问题，统一为 `SaleDetail`)
- [x] 5.3 收银台核心业务 (`checkout`)
    - [x] 校验库存充足性
    - [x] **扣减商品库存** (事务控制)
    - [x] 生成销售流水与明细
- [x] 5.4 **库存预警逻辑 (数量下限预警)**
    - [x] 创建库存服务接口及实现类
    - [x] 实现库存预警查询功能
    - [x] 添加库存预警API接口
    - [x] 实现定时任务监控库存
- [x] 5.5 **临期商品检测 (简化版)**
    - [x] 在商品表中添加过期日期相关字段
    - [x] 实现商品过期日期管理功能
    - [x] 添加临期商品检测API接口
    - [x] 实现临期商品定时检测任务
    - [x] 实现已过期商品检测任务
- [x] 5.6 库存盘点功能
    - [x] 创建库存盘点实体类
    - [x] 实现库存盘点服务功能
    - [x] 添加库存盘点API接口
    - [x] 实现盘点差异计算逻辑
    - [x] 实现盘点状态管理功能

#### 六、会员管理模块任务(创新点)

- 会员表、积分表设计
- 等级计算规则实现
- 积分抵扣逻辑
- 问卷系统设计
- 抽奖逻辑与奖品发放

------

#### 七、报表与数据分析模块任务

- 统计 SQL / 聚合查询设计
- 数据中间表设计
- ECharts 图表封装
- 管理者数据看板页面

